{"version":3,"sources":["components/Home/HomeParticle.js","components/Home/Home.js","components/Chat/Messages.js","components/Chat/ChatForm.js","components/Chat/ChatChannel.js","components/Chat/UserList.js","components/Chat/ChatList.js","components/Chat/Chat.js","App.js","index.js"],"names":["HomeParticle","className","params","Home","useState","channel","setChannel","username","setUsername","history","useHistory","Panel","shaded","bordered","style","fontSize","color","onSubmit","e","preventDefault","push","Input","required","placeholder","value","onChange","Button","appearance","type","block","Messages","socket","messages","setMessages","useEffect","on","data","prev","off","map","msg","i","mine","sender","id","console","log","message","ChatForm","setMessage","IconButton","icon","onClick","emit","room_id","ChatChannel","UserList","name","Avatar","circle","substr","ChatList","users","setUsers","fetch","then","res","json","catch","warn","elm","Chat","props","useMemo","io","path","location","state","loaded","setLoaded","verify","useCallback","replace","response","close","Loader","center","size","App","component","exact","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.179a6350.chunk.js","sourcesContent":["import Particles from 'react-particles-js';\r\n\r\nconst HomeParticle = () => {\r\n  return (\r\n    <Particles\r\n        className=\"login_particles\"\r\n        params={{\r\n        \"particles\": {\r\n            \"number\": {\r\n                \"value\": 250,\r\n                \"density\": {\r\n                    \"enable\": false\r\n                }\r\n            },\r\n            \"size\": {\r\n                \"value\": 3,\r\n                \"random\": true,\r\n                \"anim\": {\r\n                    \"speed\": 4,\r\n                    \"size_min\": 0.3\r\n                }\r\n            },\r\n            \"line_linked\": {\r\n                \"enable\": false\r\n            },\r\n            \"move\": {\r\n                \"random\": true,\r\n                \"speed\": 1,\r\n                \"direction\": \"top\",\r\n                \"out_mode\": \"out\"\r\n            }\r\n        },\r\n        \"interactivity\": {\r\n            \"events\": {\r\n                \"onclick\": {\r\n                    \"enable\": true,\r\n                    \"mode\": \"repulse\"\r\n                }\r\n            },\r\n            \"modes\": {\r\n                \"repulse\": {\r\n                    \"distance\": 400,\r\n                    \"duration\": 4\r\n                }\r\n            }\r\n        }\r\n        }}\r\n    />\r\n\r\n  );\r\n};\r\n\r\nexport default HomeParticle;","import { useState } from 'react'\r\nimport { Button, Input, Panel } from 'rsuite';\r\nimport WechatIcon from '@rsuite/icons/Wechat';\r\nimport { useHistory } from 'react-router-dom';\r\nimport './Home.css'\r\nimport HomeParticle from './HomeParticle';\r\n\r\nconst Home = () => {\r\n\r\n  const [channel, setChannel] = useState('')\r\n  const [username, setUsername] = useState('')\r\n  const history = useHistory()\r\n\r\n  function onConnect(e) {\r\n    e.preventDefault()\r\n    history.push(\"/chat\", {username, channel})\r\n  }\r\n\r\n  return (\r\n    <section className=\"view login\">\r\n\r\n      <Panel shaded bordered className=\"login_card\" >\r\n\r\n        <center className=\"mb-4\">\r\n          <WechatIcon style={{fontSize: \"4rem\", color: \"#3498ff\"}} />\r\n        </center>\r\n        \r\n        <form onSubmit={onConnect}>\r\n          <Input required placeholder=\"CHANNEL\" className=\"mb-4\" value={channel} onChange={setChannel} />\r\n          <Input required placeholder=\"USERNAME\" className=\"mb-4\" value={username} onChange={setUsername} />\r\n          <Button appearance=\"primary\" type=\"submit\" block className=\"mb-4\">CONNECT</Button>\r\n        </form>\r\n\r\n\r\n      </Panel>\r\n\r\n      <HomeParticle />\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Home;","import { useState, useEffect } from 'react';\r\n\r\nconst Messages = ({socket, username}) => {\r\n\r\n  const [messages, setMessages] = useState([])\r\n\r\n  useEffect(() => {\r\n\r\n    socket.on('chat message', data => {\r\n      setMessages(prev => [...prev, data] )\r\n    })\r\n\r\n    return () => {\r\n      socket.off('chat message')\r\n    }\r\n\r\n  }, [socket])\r\n\r\n  return (\r\n    <section className=\"message-list\">\r\n      \r\n            \r\n      {messages.map((msg, i) => {\r\n\r\n        var mine = (msg.sender === socket.id) ? \"mine\" : \"\";\r\n\r\n        console.log(msg)\r\n        \r\n        return (\r\n          <div className={\"message-container \" + mine} key={i}>\r\n            <div className={\"message \" + mine}>\r\n              <p className=\"mb-2\"><span>{msg.username}</span></p>\r\n              {msg.message}\r\n            </div>\r\n          </div>\r\n        )\r\n      })}\r\n\r\n\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default Messages;","import { IconButton, Input } from 'rsuite';\r\nimport SendIcon from '@rsuite/icons/Send';\r\nimport { useState } from 'react';\r\n\r\n/* \r\n 1- sokect to send message\r\n*/\r\nconst ChatForm = ({socket, channel, username}) => {\r\n\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  function onSend() {\r\n    socket.emit('chat message', {\r\n      room_id: channel,\r\n      message: message,\r\n      username: username\r\n    })\r\n\r\n    setMessage('')\r\n  }\r\n\r\n  \r\n  return (\r\n    <section className=\"chat-form\">\r\n      <Input className=\"chat_input\" value={message} onChange={msg => setMessage(msg)} />\r\n      <IconButton className=\"chat_input_button\" icon={<SendIcon />} appearance=\"primary\" onClick={onSend}/>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ChatForm;","import React from 'react';\r\n\r\nconst ChatChannel = ({channel = \"\", username = \"\"}) => {\r\n  return (\r\n    <section className=\"chat-title\">\r\n      <h3>{channel} - {username}</h3>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ChatChannel;","import { Avatar } from 'rsuite';\r\n\r\nconst UserList = ({name = \"\"}) => {\r\n  return (\r\n    <div className=\"flex fy-center mb-1\">\r\n      <Avatar circle className=\"avatar\" >{name.substr(0, 1)}</Avatar>\r\n      <p className=\"username\">{name}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserList;","import { useEffect, useState } from 'react';\r\nimport UserList from './UserList';\r\n\r\nconst URL = '';\r\n\r\nconst ChatList = ({socket, channel}) => {\r\n\r\n  const [users, setUsers] = useState([])\r\n\r\n  useEffect(() => {\r\n    \r\n    fetch(`${URL}/users/${channel}`)\r\n    .then(res => res.json())\r\n    .then(data => setUsers(data))\r\n    .catch(console.warn)\r\n\r\n    socket.on('users status', data => {\r\n      setUsers(data)\r\n    })\r\n\r\n  }, [socket, channel])\r\n\r\n  return (\r\n    <section className=\"chat-list\">\r\n      <header className=\"mb-4 text-center\">\r\n        <h4 className='text-center'>connected to {channel}</h4>\r\n      </header>\r\n\r\n      <aside className=\"users_connected mb-2\">\r\n        \r\n        {users.map((elm, i) => <UserList key={i} name={elm.username} />)}\r\n\r\n      </aside>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ChatList;","\r\nimport Messages from './Messages';\r\nimport ChatForm from './ChatForm';\r\nimport ChatChannel from './ChatChannel';\r\nimport ChatList from './ChatList';\r\nimport { io } from 'socket.io-client';\r\nimport './Chat.css';\r\nimport { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { useHistory } from 'react-router';\r\nimport { Loader } from 'rsuite';\r\n\r\nconst Chat = (props) => {\r\n\r\n  const socket = useMemo(() => io(\"/\", {\r\n    path: '/chat/'\r\n  }), [])\r\n\r\n  const history = useHistory()\r\n\r\n  const [state] = useState(props.location.state)\r\n\r\n  const [loaded, setLoaded] = useState(false)\r\n\r\n  const verify = useCallback(() => {\r\n\r\n    if(!state) return false\r\n\r\n    if(!state?.username || !state?.channel) return false\r\n\r\n    return true\r\n  }, [state])\r\n\r\n  useEffect(() => {\r\n\r\n    function joinRoom() {\r\n      socket.emit('join', state, (response) => {\r\n        setLoaded(true)\r\n      })\r\n      \r\n    }\r\n    \r\n    if (!verify()) {\r\n      history.replace(\"/\")\r\n    }\r\n\r\n    joinRoom()\r\n\r\n    return () => {\r\n      socket.close()\r\n    }\r\n\r\n  }, [socket, history, state, verify])\r\n\r\n\r\n  if(!verify()) {\r\n    return <></>\r\n  }\r\n\r\n  if(!loaded) {\r\n    return <Loader center size='lg' />\r\n  }\r\n\r\n  return (\r\n    <section className=\"view chat\">\r\n\r\n      <div className=\"chat-container\">\r\n        \r\n        <ChatList socket={socket} channel={state.channel} />\r\n        \r\n        <ChatChannel channel={state.channel} username={state.username} />\r\n        \r\n        <Messages socket={socket} username={state.username} />\r\n\r\n        <ChatForm socket={socket} channel={state.channel} username={state.username} />\r\n\r\n      </div>\r\n\r\n    </section>\r\n  )\r\n}\r\n\r\nexport default Chat;","import './assets/App.css';\nimport { Switch, Route } from 'react-router-dom';\n\nimport Home from './components/Home/Home';\nimport Chat from './components/Chat/Chat';\n\nfunction App() {\n  return (\n    <Switch>\n      <Route path='/' component={Home} exact/>\n      <Route path='/chat' component={Chat} exact/>\n    </Switch>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport 'rsuite/dist/rsuite.min.css'\n\nReactDOM.render(\n\n  <Router>\n    <App />\n  </Router>,\n  document.getElementById('root')\n);"],"sourceRoot":""}